!function(e){"use strict";e(document).ready((function(){function o(o){o=o||"",e(".memberModalRegister").modal("hide"),e(".memberModalRegister").find(".noo-ajax-result").html("").hide(),e(".memberModalLogin").modal("show"),""!==o?e(".memberModalLogin").find(".noo-ajax-result").show().html('<span class="success-response">'+o+"</span>"):e(".memberModalLogin").find(".noo-ajax-result").html("").hide()}function a(o,a){o=o||"",a=a||"success",e(".memberModalLogin").modal("hide"),e(".memberModalLogin").find(".noo-ajax-result").html("").hide(),e(".memberModalRegister").modal("show"),""!==o?e(".memberModalRegister").find(".noo-ajax-result").show().html('<span class="'+a+'-response">'+o+"</span>"):e(".memberModalRegister").find(".noo-ajax-result").html("").hide()}e(document).on("click",".add-new-location-btn",(function(o){return o.stopPropagation(),o.preventDefault(),e(".add-new-location-content").toggle(),!1})),e(document).on("click",".add-new-location-submit",(function(o){o.stopPropagation(),o.preventDefault();var a=e(this),n=e("#noo-map-address").val(),t=e("#noo-map-lon").val(),r=e("#noo-map-lat").val();return""!=e.trim(n)&&(a.prop("disabled","disabled").prepend('<i class="fa fa-spinner fa-spin"></i>'),e.post(nooMemberL10n.ajax_url,{action:"add_new_job_location",location:n,long:t,lat:r,security:nooMemberL10n.ajax_security},(function(o){if(1==o.success){var n=e("<option>"),t=e(".job_location_field").find(".form-control-chosen"),r=o.location_id;n.text(o.location_title).val(r),n.prop("selected",!0).attr("selected","selected"),t.is("[multiple]")||t.find("option:selected").attr("selected",!1),t.append(n),nooL10n.use_chosen_select?t.trigger("chosen:updated"):t.multiselect("rebuild"),e("#noo-map-address").val(""),e("#modalLocationPicker").modal("hide")}a.prop("disabled","").find("i").remove()}),"json")),!1})),nooL10n.use_theme_register&&e(document).on("click",".member-register-link",(function(o){return o.stopPropagation(),o.preventDefault(),a(e(this).attr("data-register-message")?e(this).data("register-message"):""),!1})),nooL10n.use_theme_login&&e(document).on("click",".member-login-link",(function(a){return a.stopPropagation(),a.preventDefault(),o(e(this).attr("data-login-message")?e(this).data("login-message"):""),!1})),e("form.noo-ajax-login-form").on("submit",(function(o){o.stopPropagation(),o.preventDefault();var a=e(this);a.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage);var n=a.serializeArray();return e.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:n,success:function(o){"object"==typeof o&&null!=o?(a.find(".noo-ajax-result").show().html(o.message),1==o.loggedin&&(e("body").hasClass("interim-login")?(e("body").addClass("interim-login-success"),e(".wp-auth-check-close",window.parent.document).click()):null==o.redirecturl?document.location.reload():document.location.href=o.redirecturl)):document.location.reload()},complete:function(){},error:function(){a.off("submit"),a.submit()}}),!1})),e(".job-manage-action.action-delete").on("click",(function(){return confirm(nooMemberL10n.confirm_delete)})),e("form.noo-ajax-register-form").on("submit",(function(o){o.stopPropagation(),o.preventDefault();var a=e(this);if(a.find(".account_reg_term").length>0&&!a.find(".account_reg_term").is(":checked"))return a.find(".noo-ajax-result").hide(),alert(nooMemberL10n.confirm_not_agree_term),!1;a.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage);var n=a.serializeArray();return e.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:n,success:function(o){if("object"==typeof o&&null!=o){if(a.find(".noo-ajax-result").show().html(o.message),void 0!==o.redirecturl&&null!=o.redirecturl&&""!=o.redirecturl)document.location.href=o.redirecturl;else if("undefined"!=typeof grecaptcha)for(var n=e(".g-recaptcha").length,t=0;t<n;t++)grecaptcha.reset(t)}else document.location.reload()},complete:function(e){},error:function(e){a.off("submit"),a.submit()}}),!1})),e("form#candidate_profile_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),e("form#noo-ajax-update-password, form#noo-ajax-update-email").each((function(o){e(this).validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())},submitHandler:function(o){var a=e(o);a.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage),e.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:a.serializeArray(),success:function(e){a.find(".noo-ajax-result").show().html(e.message),1==e.success&&(null==e.redirecturl?document.location.reload():document.location.href=e.redirecturl)},complete:function(){},error:function(){a.off("submit"),a.submit()}})}}),e(this).on("submit",(function(o){o.stopPropagation(),o.preventDefault(),e(this).validate()}))})),e("form#post_resume_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),e("form#add_job_alert_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),e(".noo-metabox-addable .noo-clone-fields").on("click",(function(){var o=e(this),a=e(o.data("template"));return o.closest(".noo-metabox-addable").find(".noo-addable-fields").append(a),a.find(".form-control-editor").wysihtml5({"font-styles":!0,blockquote:!0,emphasis:!0,lists:!0,html:!0,link:!0,image:!0,stylesheets:[wysihtml5L10n.stylesheet_rtl]}),e(".noo-remove-fields").on("click",(function(){return e(this).parent(".fields-group").remove(),!1})),e((function(){e(".icon-picker").iconPicker()})),a.find("input:first-child").focus(),!1})),e(".noo-remove-fields").on("click",(function(){return e(this).parent(".fields-group").remove(),!1})),e(document).on("click",".bulk-manage-application-action",(function(o){o.preventDefault(),o.stopPropagation();var a=e(this),n=a.closest("form"),t=a.closest(".bulk-actions").find("select[name='action']").val();if(n.find("input[name='ids[]']:checked").length&&"-1"!==t){if("delete"==t)return n.submit(),!1;var r=n.find("input[name='ids[]']:checked").map((function(){return this.value})).get().join(",");n.find(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),e.post(nooMemberL10n.ajax_url,{action:"noo_approve_reject_application_modal",application_id:r,hander:t,security:nooMemberL10n.ajax_security},(function(o){if(n.find(".member-manage-table").unblock(),o){var a=e(o);e("body").append(a),a.modal("show"),e("form#noo-ajax-approve-reject-application-form").validate({onkeyup:!1,onfocusout:!1,onclick:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),a.on("hidden.bs.modal",(function(){a.remove()}))}}))}return!1})),e(document).on("click",".member-manage-action.approve-reject-action",(function(o){o.preventDefault(),o.stopPropagation();var a=e(this);return a.closest(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),e.post(nooMemberL10n.ajax_url,{action:"noo_approve_reject_application_modal",application_id:a.data("application-id"),hander:a.data("hander"),security:nooMemberL10n.ajax_security},(function(o){if(a.closest(".member-manage-table").unblock(),o){var n=e(o);e("body").append(n),n.modal("show"),e("form#noo-ajax-approve-reject-application-form").validate({onkeyup:!1,onfocusout:!1,onclick:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),n.on("hidden.bs.modal",(function(){n.remove()}))}})),!1})),e("a.bookmark-job").on("click",(function(){var o=e(this);o.find(".fa").addClass("fa-spin");var a=o.hasClass("bookmarked");return e.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:{action:o.attr("data-action"),security:o.attr("data-security"),job_id:o.attr("data-job-id")},success:function(n){e(".noo-ajax-result").show().html(n.message),1==n.success&&(o.find(".fa").removeClass("fa-spin"),a?o.removeClass("bookmarked"):o.addClass("bookmarked"),o.closest(".job-action").find(".noo-ajax-result").show().html(n.message),o.find(".noo-bookmark-label").html(n.message_text),null==n.redirecturl||(document.location.href=n.redirecturl))},complete:function(){},error:function(){}}),!1})),e(document).on("click",".member-manage-action.view-employer-message",(function(o){o.preventDefault(),o.stopPropagation();var a=e(this),n=a.html();a.html('<i class="fa fa-spinner fa-spin"></i>'),a.closest(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),e.post(nooMemberL10n.ajax_url,{action:"noo_employer_message_application_modal",application_id:a.data("application-id"),security:nooMemberL10n.ajax_security,mode:a.data("mode")||0},(function(o){if(a.html(n),a.find(".fa").removeClass("fa-spin"),a.closest(".member-manage-table").unblock(),o){var t=e(o);e("body").append(t),t.modal("show"),t.on("hidden.bs.modal",(function(){t.remove()}))}}))})),e(document).on("click",".auto_create_order_free",(function(o){o.preventDefault();var a=e(this).data("id"),n=e(this).data("package"),t=e(this).data("security"),r=e(this).data("url-package");e.post(nooMemberL10n.ajax_url,{action:"auto_create_order",user_id:a,package_id:n,security:t},(function(e){window.location.href=r}))})),e("#contact_company_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())},submitHandler:function(o){var a=e(o);a.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage);var n=a.serializeArray();e.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:n,success:function(e){"object"==typeof e&&null!=e&&(a.find(".noo-ajax-result").show().html(e.message),1==e.success&&a.find("input, textarea").val(""))},complete:function(){},error:function(){a.off("submit"),a.submit()}})}}),e(document).on("click",".noo-follow-company",(function(o){o.preventDefault();var n=e(this),t=n.data("company-id"),r=n.html(),i=n.data("user-id");e.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:{action:"noo_follow_company",company_id:t,user_id:i},beforeSend:function(){n.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(o){"error"===o.status&&(o.need_login?a(o.message,"error"):e.notify(o.message,{position:"right bottom",className:"error"})),n.html(r);try{"success"===o.status&&(n.html(o.label),n.closest(".noo-company-action").find(".total-follow > span").html(o.total))}catch(e){alert(e)}}})})),e(".noo-company-review").on("click",".noo-submit",(function(o){o.preventDefault();var a=e(this),n=a.html(),t=a.data("url");e.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:a.closest(".noo-form-comment").serializeArray(),beforeSend:function(){a.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(o){a.html(n),"success"===o.status?(a.closest(".noo-company-review").find(".noo-list-comment").append(o.html).fadeIn("slow"),e(".noo-rating").each((function(o,a){var n=e(this).data("readonly"),t=e(this).data("score-name");e(this).raty({score:5,readOnly:n,half:!0,scoreName:t})})),window.location.href=t):a.next().html(o.message)}})})),e(".noo-resume-review").on("click",".noo-review-submit",(function(o){o.preventDefault();var a=e(this),n=a.html(),t=a.data("url");e.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:a.closest(".noo-form-resume-comment").serializeArray(),beforeSend:function(){a.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(o){a.html(n),"success"===o.status?(a.closest(".noo-resume-review").find(".noo-list-comment").append(o.html).fadeIn("slow"),e(".noo-rating").each((function(o,a){var n=e(this).data("readonly"),t=e(this).data("score-name");e(this).raty({score:5,readOnly:n,half:!0,scoreName:t})})),window.location.href=t):a.next().html(o.message)}})})),e(".btn-print-resume").on("click",(function(o){o.preventDefault();var a=e(this).data("resume"),n=e(this).data("total-review"),t=e(this).data("layout"),r=e(this).data("post-review"),i=window.open("","","width=1024 ,height=842");return e.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"html",data:{action:"noo_create_print_resume",resume_id:a,total:n,layout:t,post_review:r},success:function(e){try{i.document.write(e),i.document.close(),i.focus()}catch(e){}}}),!1})),e(document).on("click",".resume-contact button",(function(o){o.preventDefault();var a=e(this),n=a.html(),t=a.closest(".resume-contact");e.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:t.serializeArray(),beforeSend:function(){t.find(".notice").html(""),a.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(e){a.html(n);try{t.find(".notice").html(e.message)}catch(e){t.find(".notice").html(e)}}})}))}))}(jQuery);