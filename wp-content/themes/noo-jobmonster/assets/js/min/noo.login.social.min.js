function onXingAuthLogin(e){if(null!==e.user){var i=e.user.display_name,o={action:"check_login",using:"xing",id:e.user.active_email};jQuery.post(nooSocial.ajax_url,o,(function(o){if("success"==o.status)jQuery(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),xing.logout(),window.location.reload();else if("not_user"==o.status)if("both"==nooSocial.allow){var a=jQuery(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#0077b4","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgXingInModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+i).css({margin:"0px 0px 20px 0px"}),jQuery(".memberModalLogin").modal("hide"),a.modal("show").removeClass("form-actions"),a.find('input[name="user_login"]').val(e.user.active_email),a.find('input[name="user_email"]').val(e.user.active_email);var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="xing" /><input type="hidden" class="name" name="name" value="'+i+'" /><input type="hidden" class="using_id" name="using_id" value="'+e.user.active_email+'" />'),xing.logout()}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"xing",id:e.user.ative_email,userid:e.user.id,name:i,capbilities:"empoyer"}:(nooSocial.allow="candidate")&&(s={action:"create_user",security:nooSocial.security,using:"xing",id:e.user.active_email,userid:e.user.id,name:i,capbilities:"candidate"}),jQuery.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&(xing.logout(),window.location.reload())}))}else{if("error"===o.status)return jQuery(".noo-ajax-result").show().html(o.message),!1;jQuery(".noo-ajax-result").show().html(nooSocial.msgServerError)}}))}}function random_pass(){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<15;o++)e+=i.charAt(Math.floor(62*Math.random()));return e}jQuery(document).ready((function(e){e(".button_socical.fb").on("click",(function(i){i.preventDefault();e(this);if("undefined"!=typeof FB)return FB.login((function(i){if(!i.authResponse)return e(".noo-ajax-result").show().html(nooSocial.msgFBUserCanceledLogin),!1;-1!==i.authResponse.grantedScopes.split(",").indexOf("email")?FB.api("/me?fields=name,email",(function(i){if(!i||i.error)e(".noo-ajax-result").show().html(nooSocial.msgMissingAppID);else if(i.email){var o={action:"check_login",using:"fb",id:i.email};e.post(nooSocial.ajax_url,o,(function(o){if("success"===o.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else{if("not_user"!==o.status)return"error"===o.status?(e(".noo-ajax-result").show().html(o.message),!1):(e(".noo-ajax-result").show().html(nooSocial.msgServerError),!1);if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#2952aa","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgFacebookModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+i.name).css({margin:"0px 0px 20px 0px"}),a.find('input[name="user_login"]').val(i.email),a.find('input[name="user_email"]').val(i.email);var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="fb" /><input type="hidden" class="userid" name="userid" value="'+i.id+'" /><input type="hidden" class="name" name="name" value="'+i.name+'" /><input type="hidden" class="using_id" name="using_id" value="'+i.email+'" />'),e(".memberModalLogin").modal("hide"),a.modal("show")}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"facebook",id:i.email,userid:i.id,name:i.name,capabilities:"employer"}:"candidate"==nooSocial.allow&&(s={action:"create_user",security:nooSocial.security,using:"facebook",id:i.email,userid:i.id,name:i.name,capabilities:"candidate",birthday:i.birthday,address:i.address}),e.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&window.location.reload()}))}}}))}else e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail)})):(e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail),FB.api("/me/permissions","DELETE"))}),{scope:"email",return_scopes:!0}),!1}));""!==nooSocial.google_client_id&&"undefined"!=typeof gapi&&gapi.load("auth2",(function(){var i=nooSocial.google_client_id;i=i.split(".")[0];var o=nooSocial.google_client_secret;auth2=gapi.auth2.init({client_id:i+".apps.googleusercontent.com",cookiepolicy:o}),e(".button_socical.gg").each((function(){var i;i=this.id,auth2.attachClickHandler(i,{},(function(o){var a=o.getAuthResponse(),n={action:"check_login",using:"gg",id:o.getBasicProfile().getEmail(),id_token:a.id_token};$this=e(i),e.post(nooSocial.ajax_url,n,(function(i){if("success"===i.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else if("not_user"===i.status)if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#cc3d2d","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgGoogleModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+o.getBasicProfile().getName()).css({margin:"0px 0px 20px 0px"}),a.find('input[name="user_login"]').val(o.getBasicProfile().getEmail()),a.find('input[name="user_email"]').val(o.getBasicProfile().getEmail());var n=random_pass();a.find('input[name="user_password"]').val(n),a.find('input[name="cuser_password"]').val(n),a.find("form").append('<input type="hidden" class="using" name="using" value="gg" /><input type="hidden" class="userid" name="userid" value="'+o.getBasicProfile().getId()+'" /><input type="hidden" class="name" name="name" value="'+o.getBasicProfile().getName()+'" /><input type="hidden" class="using_id" name="using_id" value="'+o.getBasicProfile().getEmail()+'" />'),e(".memberModalLogin").modal("hide"),a.modal("show").removeClass("form-actions")}else{var s={};"employer"==nooSocial.allow?s={action:"create_user",security:nooSocial.security,using:"google",id:o.getBasicProfile().getEmail(),userid:o.getBasicProfile().getId(),name:o.getBasicProfile().getName(),capabilities:"employer"}:"candidate"==nooSocial.allow&&(s={action:"create_user",security:nooSocial.security,using:"google",id:o.getBasicProfile().getEmail(),userid:o.getBasicProfile().getId(),name:o.getBasicProfile().getName(),capabilities:"candidate"}),e.post(nooSocial.ajax_url,s,(function(e){"success"==e.status&&window.location.reload()}))}else{if("error"===i.status)return e(".noo-ajax-result").show().html(i.message),!1;e(".noo-ajax-result").show().html(nooSocial.msgServerError)}}))}),(function(i){return e(".noo-ajax-result").show().html(i),!1}))}))}))})),window.fbAsyncInit=function(){FB.init({appId:nooSocial.facebook_api,cookie:!0,xfbml:!0,version:"v2.5"})},""!==nooSocial.facebook_api&&function(e,i,o){var a,n=e.getElementsByTagName(i)[0];e.getElementById(o)||((a=e.createElement(i)).id=o,a.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(a,n))}(document,"script","facebook-jssdk"),""!==nooSocial.xing_consumer_key&&function(e){var i;e.getElementById("lwx")||((i=e.createElement("script")).id="lwx",i.src="https://www.xing-share.com/plugins/login.js",e.getElementsByTagName("head")[0].appendChild(i))}(document);